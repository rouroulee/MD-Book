## JMM Java内存模型

JMM解决的问题是它屏蔽了操作系统和各种硬件对内存访问的差异性问题。

* JMM
  * sync
  * happens-before
  * 

* 多线程情况下会有编译器优化和内存优化,而造成乱序的问题。


> 内存可见性问题，Java中是没有内存可见性问题的。CPU遵循了mesi协议，也就解决了硬件的L1 L2 L3 缓存一致性问题。
    mesi强一致性 mesif弱一致性

那么为什么会出现不一致的问题？ 
一切的“可见性”问题都是由于编译优化，指令提取。只有在多线程的情况下才做优化，单线程是不会做优化的。

